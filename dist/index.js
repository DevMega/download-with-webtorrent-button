!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=2)}([function(e,n){function t(){"use strict";function e(e){var o=e.currentTarget;return o.classList.contains("init")?n(e):o.classList.contains("downloading")?t(e):o.classList.contains("ready")?r(e):!o.classList.contains("seeding")||r(e)}function n(e){var n=e.currentTarget;n.classList.add("downloading");try{var t=n.querySelector("span"),r=n.querySelector("sub"),o=t.innerText,i=new WebTorrent;return i.on("error",function(e){console.error("ERROR: "+e.message)}),"auto"===n.dataset.webtorrent&&(n.dataset.webtorrent="https://webtorrentify.now.sh/?href="+n.href,r.innerText="Generating .torrent file..."),i.add(n.dataset.webtorrent,function(e){function i(){var i=e.numPeers-1;i+=1===i?" peer":" peers";var s=Math.round(100*e.progress)+"%";e.done?e.done&&n.classList.contains("seeding")&&(t.innerText=a.name+" - Ready",r.innerText="Seeding ("+i+")"):(n.style="background-size: 28px 28px, "+s+" 100%, 100%;",t.innerText.endsWith(" - Ready")||(t.innerText=o+" - "+s,r.innerText="Downloading ("+i+")"))}console.log(e);var a;a=1===e.files.length||void 0===n.dataset.file?e.files[0]:e.files.find(function(e){return e.name===n.dataset.file}),i(),setInterval(i,500),a.getBlobURL(function(e,o){if(e)return void window.alert("WebTorrent error: source getBlobURL");n.classList.remove("downloading"),n.classList.add("ready"),t.innerText=a.name+" - Ready",r.innerText="Click to save file",n.download=a.name,n.href=o})}),e.preventDefault(),!1}catch(e){return console.log(e),!0}}function t(e){return e.preventDefault(),!1}function r(e){var n=e.currentTarget;return n.classList.remove("ready"),n.classList.add("seeding"),!0}for(var o=document.querySelectorAll("a[data-webtorrent]"),i=0;i<o.length;i++){var a=o[i],s=document.createElement("span");s.innerText=a.innerText;var c=document.createElement("sub");if(WebTorrent.WEBRTC_SUPPORT)c.innerText="Download with WebTorrent",a.addEventListener("click",e);else{console.log("WebRTC is not supported"),a.classList.add("no-webrtc");var d=document.createElement("a");d.href=a.dataset.webtorrent,d.innerText="Download with Bittorrent",c.appendChild(d)}a.innerText="",a.appendChild(s),a.appendChild(c),a.classList.add("init")}}window&&(window.registerWebtorrentLinks=t,t())},function(e,n){},function(e,n,t){t(0),e.exports=t(1)}]);